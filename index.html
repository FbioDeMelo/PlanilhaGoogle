<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Formulário Líbano</title>
    <link href="https://fonts.googleapis.com/css2?family=Poppins:wght@300;400;500;600;700&family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="index.css" />
</head>
<body>
    <header>
        <nav>
            <div class="nav-container">
                <div class="logo">
                    <img src="https://faculdadelibano.edu.br/_next/image?url=%2Froot%2Flogo-website-branca.webp&w=1920&q=75"
                        alt="Libano Educacional">
                </div>
            </div>
        </nav>
    </header>
    <main class="container">
        <div class="form-header">
            <h2>Formulário de Contrato</h2>
            <p>Preencha todos os campos obrigatórios</p>
        </div>
        <form id="contratoForm">
            <div class="form-wrapper">
                <div class="form-group"><label for="nome" class="required">Nome completo</label><input type="text"
                        id="nome" name="nome" required placeholder="Digite seu nome completo"></div>
                <div class="form-group"><label for="cpf" class="required">CPF</label><input type="text" id="cpf"
                        name="cpf" required placeholder="Digite apenas números" maxlength="11" inputmode="numeric">
                    <p class="input-hint">Apenas números, sem pontos ou traços</p>
                </div>
                <div class="form-group"><label for="data" class="required">Data (mês, dia, ano)</label><input
                        type="text" id="data" name="data" required placeholder="Ex: 15 de maio de 2023"></div>
                <div class="form-group"><label for="razao_social">Razão Social (se houver)</label><input type="text"
                        id="razao_social" name="razao_social" placeholder="Razão social da empresa"></div>
                <div class="form-group"><label for="cnpj">CNPJ (se houver)</label><input type="text" id="cnpj"
                        name="cnpj" placeholder="Digite apenas números" maxlength="14" inputmode="numeric">
                    <p class="input-hint">Apenas números, sem pontos, barras ou traços</p>
                </div>
                <div class="form-group"><label for="nacionalidade" class="required">Nacionalidade</label><input
                        type="text" id="nacionalidade" name="nacionalidade" required placeholder="Ex: Brasileira"></div>
                <div class="form-group"><label for="estado_civil" class="required">Estado Civil</label><input
                        type="text" id="estado_civil" name="estado_civil" required
                        placeholder="Ex: Solteiro(a), Casado(a)"></div>
                <div class="form-group"><label for="profissao" class="required">Profissão</label><input type="text"
                        id="profissao" name="profissao" required placeholder="Sua profissão"></div>
                <div class="form-group"><label for="rg" class="required">RG</label><input type="text" id="rg" name="rg"
                        required placeholder="Número do RG"></div>
                <div class="form-group"><label for="orgao_uf" class="required">Órgão Expedidor e UF</label><input
                        type="text" id="orgao_uf" name="orgao_uf" required placeholder="Ex: SSP/SP"></div>
                <div class="form-group"><label for="endereco" class="required">Endereço Completo</label><input
                        type="text" id="endereco" name="endereco" required
                        placeholder="Rua, número, complemento, bairro, cidade/estado"></div>
                <div class="form-group"><label for="email" class="required">E-mail</label><input type="email" id="email"
                        name="email" required placeholder="seu@email.com"></div>
                <div class="form-group"><label for="disciplina" class="required">Disciplina(s)</label><input type="text"
                        id="disciplina" name="disciplina" required placeholder="Disciplinas lecionadas"></div>
                <div class="form-group"><label for="valor" class="required">Valor</label><input type="text" id="valor"
                        name="valor" required placeholder="R$ 0,00" inputmode="decimal"></div>
                <div class="form-group"><label for="valor_extenso" class="required">Valor por extenso</label><input
                        type="text" id="valor_extenso" name="valor_extenso" required placeholder="Ex: Mil reais"></div>
                <button type="submit">Enviar Contrato</button>
            </div>
        </form>
    </main>
    <div id="loadingOverlay">
        <div class="loading-content">
            <img src="https://faculdadelibano.edu.br/_next/image?url=%2Froot%2Flogo-website-branca.webp&w=1920&q=75" 
                 alt="Libano Educacional" 
                 class="loading-logo">
            <div class="loading-spinner"></div>
            <p class="loading-text">Enviando contrato...</p>
        </div>
    </div>
    <div id="successPopup" class="popup-overlay">
        <div class="popup-content">
            <span class="popup-close">&times;</span>
            
            <div class="popup-header">
                <img src="https://faculdadelibano.edu.br/_next/image?url=%2Froot%2Flogo-website-branca.webp&w=1920&q=75" 
                     alt="Libano Educacional" 
                     class="popup-logo">
            </div>
            
            <div class="popup-body">
                <div class="popup-icon">
                    <svg xmlns="http://www.w3.org/2000/svg" width="64" height="64" viewBox="0 0 24 24" fill="none" stroke="#4CAF50" stroke-width="2" stroke-linecap="round" stroke-linejoin="round">
                        <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"></path>
                        <polyline points="22 4 12 14.01 9 11.01"></polyline>
                    </svg>
                </div>
                <h3>Contrato Enviado!</h3>
                <p>Seu formulário foi recebido com sucesso!</p>
            </div>
            
            <div class="popup-footer">
                <button class="popup-button">OK</button>
            </div>
        </div>
    </div>
    <script>
        //validador
        const cpfInput = document.getElementById('cpf');
        const cnpjInput = document.getElementById('cnpj');
        const loadingOverlay = document.getElementById('loadingOverlay');
        const contratoForm = document.getElementById("contratoForm");

        cpfInput.addEventListener('input', function (e) {
            this.value = this.value.replace(/\D/g, '');
        });

        cnpjInput.addEventListener('input', function (e) {
            this.value = this.value.replace(/\D/g, '');
        });

        contratoForm.addEventListener("submit", async function (event) {
            event.preventDefault();
            loadingOverlay.style.display = 'flex';

            try {
                const formData = new FormData(this);
                const jsonData = {};
                formData.forEach((value, key) => { jsonData[key] = value });
                await fetch("https://script.google.com/macros/s/AKfycbwDCx4iCOfhCklf_Flak0nD2t7thpAy5B-TO6Ss7Z9EAFyRSRCWiHndCvejDxu45_AY/exec", {
                    method: "POST",
                    mode: "no-cors",
                    headers: { "Content-Type": "application/json" },
                    body: JSON.stringify(jsonData)
                });

                contratoForm.reset();
                loadingOverlay.style.display = 'none';
                document.getElementById('successPopup').style.display = 'flex';
            } catch (error) {
                console.error("Erro ao enviar os dados:", error);
                alert("Erro ao enviar os dados. Por favor, tente novamente.");
                loadingOverlay.style.display = 'none';
            }
            setTimeout(() => {
                document.getElementById('successPopup').style.display = 'none';
            }, 5000);
        });
        document.querySelector('.popup-close').addEventListener('click', function () {
            document.getElementById('successPopup').style.display = 'none';
        });
        document.getElementById('successPopup').addEventListener('click', function (e) {
            if (e.target === this) {
                this.style.display = 'none';
            }
        });
    </script>
</body>
</html>
